{"version":3,"sources":["lib/MtgCard.jsx","lib/MtgDeck.jsx","components/CardLink.jsx","components/DeckCard.jsx","components/DeckList.jsx","deck.jsx"],"names":["MtgCard","input","raw","quantity","name","set","setNumber","parseImport","matches","match","groups","MtgDeck","Deck","Sideboard","Array","isArray","split","type","forEach","line","push","deckExport","Commander","arena","Companion","length","card","CardLink","DeckCard","Fragment","wp","element","__","i18n","DeckList","deck","map","registerBlockType","blocks","InspectorControls","blockEditor","components","Button","PanelBody","TextareaControl","title","icon","category","supports","html","attributes","default","source","selector","edit","props","parseRaw","event","setAttributes","clearDeck","e","save"],"mappings":"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","file":"deck.js","sourceRoot":"","sourcesContent":["class MtgCard {\n/*\traw;\n\tquantity;\n\tname = '';\n\tset = '';\n\tsetNumber = 0;\n*/\n\tconstructor( input = '' ) {\n\t\tthis.raw = '';\n\n\t\tthis.quantity = 0;\n\t\tthis.name = '';\n\t\tthis.set = '';\n\t\tthis.setNumber = '';\n\n\t\tthis.parseImport( input );\n\t}\n\n\tparseImport( input ) {\n\t\tif ( ! input ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.raw = input;\n\n\t\tconst matches = input.match( /^(?<quantity>\\d+) (?<name>.+) \\((?<set>[\\da-zA-Z]{3})\\) (?<setNumber>\\d+)$/ );\n\n\t\tif ( matches ) {\n\t\t\tthis.quantity  = matches.groups.quantity;\n\t\t\tthis.name      = matches.groups.name;\n\t\t\tthis.set       = matches.groups.set;\n\t\t\tthis.setNumber = matches.groups.setNumber;\n\t\t}\n\t}\n\n\tget arena() {\n\t\treturn this.quantity + ' ' + this.name + ' (' + this.set + ') ' + this.setNumber;\n\t}\n}\n\nexport default MtgCard;\n","\nimport MtgCard from './MtgCard';\n\nclass MtgDeck {\n/*\tCompanion;\n\tCommander;\n\tDeck = [];\n\tSideboard = [];\n*/\n\tconstructor( input = false ) {\n\t\tthis.Deck = [];\n\t\tthis.Sideboard = [];\n\n\t\tif ( input ) {\n\t\t\tthis.parseImport( input );\n\t\t}\n\t}\n\n\tparseImport( input ) {\n\t\tif ( ! Array.isArray( input ) ) {\n\t\t\tinput = input.split('\\n');\n\t\t}\n\n\t\tlet type = 'Deck';\n\n\t\tinput.forEach( function( line ) {\n\t\t\tif ( line ) {\n\t\t\t\t// If it starts with a digit, it's a card.  Else, it's a type.\n\t\t\t\tif ( line.match( /^\\d/ ) ) {\n\t\t\t\t\t// Decks and Sideboards can be multiple cards, so add it to the array.\n\t\t\t\t\tif ( 'Deck' === type || 'Sideboard' === type ) {\n\t\t\t\t\t\tthis[ type ].push( new MtgCard( line ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis[ type ] = new MtgCard( line );\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\ttype = line;\n\t\t\t\t}\n\t\t\t}\n\t\t}, this );\n\t}\n\n\tget arena() {\n\t\tlet deckExport = '';\n\n\t\tif ( this.Commander ) {\n\t\t\tdeckExport += 'Commander\\n' + this.Commander.arena + '\\n\\n';\n\t\t}\n\n\t\tif ( this.Companion ) {\n\t\t\tdeckExport += 'Companion\\n' + this.Companion.arena + '\\n\\n';\n\t\t}\n\n\t\tif ( this.Sideboard.length ) {\n\t\t\tdeckExport += 'Deck\\n';\n\t\t\tthis.Deck.forEach( function( card ) {\n\t\t\t\tdeckExport += card.arena + '\\n';\n\t\t\t} )\n\t\t\tdeckExport += '\\n';\n\t\t}\n\n\t\tif ( this.Sideboard.length ) {\n\t\t\tdeckExport += 'Sideboard\\n';\n\t\t\tthis.Sideboard.forEach( function( card ) {\n\t\t\t\tdeckExport += card.arena + '\\n';\n\t\t\t} )\n\t\t\tdeckExport += '\\n';\n\t\t}\n\n\t\treturn deckExport;\n\t}\n}\n\nexport default MtgDeck;\n","\nfunction CardLink( { card } ) {\n\treturn ( <a href=\"#\">{ card.name }</a> );\n}\n\nexport default CardLink;\n","\nimport CardLink from './CardLink';\n\nfunction DeckCard( { card } ) {\n\treturn (\n\t\t<li>\n\t\t\t{ card.quantity }x <CardLink card={ card } />\n\t\t</li>\n\t);\n}\n\nexport default DeckCard;\n","\nconst {\n\tFragment\n} = wp.element;\n\nconst {\n\t__\n} = wp.i18n;\n\nimport CardLink from './CardLink';\nimport DeckCard from './DeckCard';\n\nfunction DeckList( { deck } ) {\n\treturn (\n\t\t<div className=\"mtg-deck-list\">\n\n\t\t\t{ deck.Commander && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<h3>{ __( 'Commander:', 'mtg-blocks' ) }</h3>\n\t\t\t\t\t<CardLink card={ deck.Commander } />\n\t\t\t\t</Fragment>\n\t\t\t) }\n\n\t\t\t{ deck.Companion && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<h3>{ __( 'Companion:', 'mtg-blocks' ) }</h3>\n\t\t\t\t\t<CardLink card={ deck.Companion } />\n\t\t\t\t</Fragment>\n\t\t\t) }\n\n\t\t\t{ deck.Deck.length && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<h3>{ __( 'Deck:', 'mtg-blocks' ) }</h3>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{ deck.Deck.map( card => ( <DeckCard key={ card.raw } card={ card } /> ) ) }\n\t\t\t\t\t</ul>\n\t\t\t\t</Fragment>\n\t\t\t) }\n\n\t\t\t{ deck.Sideboard.length && (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<h3>{ __( 'Sideboard:', 'mtg-blocks' ) }</h3>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t{ deck.Sideboard.map( card => ( <DeckCard key={ card.raw } card={ card } /> ) ) }\n\t\t\t\t\t</ul>\n\t\t\t\t</Fragment>\n\t\t\t) }\n\n\t\t</div>\n\t)\n}\n\n\nexport default DeckList;\n","const {\n\tregisterBlockType\n} = wp.blocks;\n\nconst {\n\tInspectorControls\n} = wp.blockEditor;\n\nconst {\n\tButton,\n\tPanelBody,\n\tTextareaControl\n} = wp.components;\n\nconst {\n\tFragment\n} = wp.element;\n\nconst {\n\t__\n} = wp.i18n;\n\nimport MtgDeck from './lib/MtgDeck';\nimport DeckList from './components/DeckList';\n\nimport './deck.scss'\n\nregisterBlockType( 'magic-blocks/deck', {\n\ttitle: __( 'MTG Deck', 'mtg-blocks' ),\n\ticon: 'admin-page',\n\tcategory: 'common',\n\tsupports    : {\n\t\thtml    : false,\n\t},\n\n\tattributes: {\n\t\traw: {\n\t\t\ttype: 'string',\n\t\t\tdefault: '',\n\t\t\tsource: 'text',\n\t\t\tselector: 'pre',\n\t\t},\n\t\tdeck: {\n\t\t\ttype: 'object',\n\t\t\tdefault: null,\n\t\t}\n\t},\n\n\tedit: function( props ) {\n\t\tconst parseRaw = function( event ) {\n\t\t\tprops.setAttributes( { deck: new MtgDeck( props.attributes.raw ) } );\n\t\t},\n\t\tclearDeck = function() {\n\t\t\tprops.setAttributes({\n\t\t\t\traw : '',\n\t\t\t\tdeck : null,\n\t\t\t});\n\t\t};\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{ props.attributes.deck ? (\n\t\t\t\t\t<DeckList deck={ props.attributes.deck } />\n\t\t\t\t) : (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\t\tlabel={ __( 'Arena Format Deck Import', 'mtg-blocks' ) }\n\t\t\t\t\t\t\tvalue={ props.attributes.raw }\n\t\t\t\t\t\t\tonChange={ raw => props.setAttributes( { raw } ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button isSecondary onClick={ e => parseRaw( e ) }>\n\t\t\t\t\t\t\t{ __( 'Process Import →', 'mtg-blocks' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t\t<InspectorControls>\n\t\t\t\t\t<PanelBody title={ __( 'Deck Settings', 'mtg-blocks' ) }>\n\t\t\t\t\t\t<Button isPrimary={ !! props.attributes.deck } disabled={ ! props.attributes.deck } isLarge={true} onClick={ clearDeck }>\n\t\t\t\t\t\t\t{ __( 'Reset Deck', 'mtg-blocks' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t</InspectorControls>\n\t\t\t</Fragment>\n\t\t);\n\t},\n\n\tsave: function( props ) {\n\t\treturn (\n\t\t\t<div className=\"mtg-blocks_deck\">\n\t\t\t\t<pre>{ props.attributes.raw }</pre>\n\t\t\t\t{ props.attributes.deck ? ( <DeckList deck={ props.attributes.deck } /> ) : null }\n\t\t\t</div>\n\t\t);\n\t}\n} );\n"]}